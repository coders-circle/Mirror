INC_DIR = include
SRC_DIR = src

CFLAG = `pkg-config --cflags gtk+-3.0`
CFLAGS = --std=c++11

CC = g++

#for common
SOURCES_COMM = TcpHandler.cpp TcpListener.cpp RequestHandler.cpp ChatMessage.cpp
HEADERS_COMM = TcpHandler.h TcpListner.h RequestHandler.h
OBJECTS_COMM = $(SOURCES_COMM:.cpp=.o)
FSOURCES_COMM := $(addprefix $(SRC_DIR)/common/, $(SOURCES_COMM))
FHEADERS_COMM := $(addprefix $(INC_DIR)/common/, $(HEADERS_COMM))

LDFLAGS_COMM = -lboost_system -lboost_thread -lpthread

all:  client.o common
	$(CC) -o output $(SRC_DIR)/client/main.cpp *.o -Iinclude/ $(CFLAGS) $(CFLAG) $(LDFLAGS_COMM)

common: $(OBJECTS_COMM)
	$(CC) -c -o common.o $<

%.o :  src/common/%.cpp $(FHEADERS_COMM)
	$(CC) -c -o $@ $< $(LDFLAGS_COMM) -Iinclude/ $(CFLAG) $(CFLAGS)

client.o: src/client/TcpClient.cpp
	$(CC)  -c -o $@ $< -Iinclude/ $(CFLAG) $(CFLAGS)
